!function(e,t,i,l){function n(t,i){this.element=t,this.options=e.extend({},s,i),this._defaults=s,this.childField=e(this.element),this.parentField=e(this.options.parentSelector),this.parentValue=this.getFieldValue(this.parentField),this.childValue=this.getFieldValue(this.element),this._name=a,this.init()}var a="childlist",s={parentSelector:".js-childlist-parent",parentVarName:null,parentOnChange:!0,childSelector:".js-childlist-child",ajaxUrl:null};n.prototype={init:function(){var e=this;e.parentField.change(function(t){e.updateChild()}),e.updateChild()},getFieldValue:function(t){var i=null;if(e(t).is("select")){var l=e(t).find("option:selected");i=l.val()}else i=e(t).val();return i},isFieldActive:function(e){var t=this;t.getFieldValue(e);return""!=option.val()},updateChild:function(){var t=this;t.parentValue=t.getFieldValue(t.parentField),e.ajax({url:t.options.ajaxUrl,type:"POST",dataType:"json",cache:!1,data:t.options.parentVarName+"="+t.parentValue,success:function(i){var l="";null!==i&&e.each(i,function(e,i){l+='<option value="'+i.value+'"',i.value===t.childValue&&(l+=' selected="selected"'),l+=" >"+i.text+"</option>"}),t.childField.empty().append(l),t.childField.trigger("liszt:updated")}})},resetField:function(t){e(t).val(""),e(t).trigger("liszt:updated")},submitForm:function(){this.theForm.submit()}},e.fn[a]=function(t){return this.each(function(){e.data(this,"plugin_"+a)||e.data(this,"plugin_"+a,new n(this,t))})}}(jQuery,window,document);