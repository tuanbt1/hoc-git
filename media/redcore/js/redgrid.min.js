!function(e,i,t,r){function d(i,t){this.element=i,this.options=e.extend({},n,t),this._defaults=n,this.theForm=this.element,this.orderCols=e(this.options.orderColSelector),this.orderDir=e(this.options.orderDirSelector),this.orderField=e(this.options.orderFieldSelector),this.directionField=e(this.options.directionFieldSelector),this.ordering=this.options.ordering,this.direction=this.options.direction,this._name=o,this.init()}var o="redgrid",n={ajaxRefreshUrl:"",formSelector:"#adminForm",orderColSelector:".js-order-col",orderDirSelector:".js-order-dir",orderFieldSelector:".js-order-field",directionFieldSelector:".js-direction-field",ordering:"",direction:"ASC"};d.prototype={init:function(){var i=this;this.createOrderingField(),this.createDirectionField(),this.orderCols.click(function(){var t=e(this).attr("data-order");t.length&&(t!==i.orderCol?(i.updateFieldValue(i.orderField,t),i.updateFieldValue(i.directionField,"ASC")):i.toggleDirection(),i.theForm.submit())})},toggleDirection:function(){var e="ASC";"ASC"==this.direction.toUpperCase()&&(e="DESC"),this.updateFieldValue(this.directionField,e)},createOrderingField:function(){var i=this;this.orderField.length||(this.orderField=e("<input>").attr({type:"hidden",id:"js-order-field","class":"js-order-field",name:"filter_order",value:this.ordering}),this.orderField.appendTo(this.theForm)),this.orderField.is("select")&&(this.orderCols.each(function(){var t=e(this).attr("data-order"),r=e(this).attr("data-name");if(t.length){var d=i.findOption(i.orderField,t);if(!d.length){var d=e("<option>");d.text(r).val(t),e(this).hasClass("active")&&d.attr("selected","selected"),i.orderField.append(d)}}}),this.orderField.trigger("liszt:updated")),this.orderCol=this.orderField.val()},createDirectionField:function(){this.directionField.length||(this.directionField=e("<input>").attr({type:"hidden",id:"js-direction-field","class":"js-direction-field",name:"filter_order_Dir",value:this.direction}),this.directionField.appendTo(this.theForm)),this.direction=this.directionField.val()},updateFieldValue:function(i,t){var r=i.attr("type");if("hidden"===r||"text"===r)i.attr("value",t);else if(i.is("select")){var d=i.find("option").filter(function(){return e(this).val()==t});if(d.length)d.attr("selected","selected");else{var o=e("<option>");o.text(t).val(t),o.attr("selected","selected"),i.append(o)}i.trigger("liszt:updated")}},findOption:function(i,t){return i.find("option").filter(function(){return e(this).val()==t})}},e.fn[o]=function(i){return this.each(function(){e.data(this,"plugin_"+o)||e.data(this,"plugin_"+o,new d(this,i))})}}(jQuery,window,document);