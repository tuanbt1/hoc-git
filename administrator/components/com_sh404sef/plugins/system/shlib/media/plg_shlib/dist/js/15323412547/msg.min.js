/*! Copyright Weeblr llc 2018 - Licence: http://www.gnu.org/copyleft/gpl.html GNU/GPL */
!function(e,o,n,s){"use strict;";function t(e){var o=s("#"+e),n=s(o.parent());o.slideUp(200,function(){o.remove(),n.children().length||n.parent().hide()})}function i(e){e.removeClass("wbl-spin").text("Error").addClass("wb-clr-alert")}function r(e){var o=e.data("element-id"),n=e.data("token"),r={uid:o};r[n]=1;s.post("index.php?option=com_ajax&plugin=shlib&method=removeMsg&format=json",r).done(function(n,s,r){try{"object"!=typeof n&&(n=JSON.parse(n)),"object"==typeof n?n.success?t(o):(console.log("ShLib: Ajax error: "+n.message),i(e)):console.log("wbLib: ajax error: no object in return")}catch(e){console.log("wbLib: ajax error decoding request response: "+e.message),console.debug(n),console.debug(e)}}).fail(function(o,n,s){console.log("wbLib: ajax error: "+n),console.debug(s),i(e)})}function l(e,o){var n=s(this).attr("id"),t=s("#wbl-msg-body-"+n);0==t.is(":visible")?(t.addClass("wbl-body-visible"),t.slideDown(300)):(t.slideUp(300),t.removeClass("wbl-body-visible"))}function c(e,o){var n=s(this);return n.html("x").addClass("wbl-spin"),r(n),!1}function a(){s(".wbl-msg-button-close").click(c),s(".wbl-container-msg-one-toggle").click(l)}s(n).ready(function(){try{a()}catch(e){console.log("Error setting up message center: "+e.message)}}),e.shlib=e.shlib||{},e.shlib.msgCenter={refreshActions:function(){a()}}}(window.weeblrApp=window.weeblrApp||{},window,document,jQuery);
