/*! Copyright Weeblr llc 2018 - Licence: http://www.gnu.org/copyleft/gpl.html GNU/GPL */
var shlBootstrap=shlBootstrap||function(e){var t={updateBootstrap:function(){e("*[rel=tooltip]").tooltip(),e("select").chosen({disable_search_threshold:10,allow_single_deselect:!0}),e(".radio.btn-group label").addClass("btn"),e(".btn-group label:not(.active)").click(function(){var t=e(this),r=e("#"+t.attr("for"));r.prop("checked")||(t.closest(".btn-group").find("label").removeClass("active btn-success btn-danger btn-primary"),""==r.val()?t.addClass("active btn-primary"):0==r.val()?t.addClass("active btn-danger"):t.addClass("active btn-success"),r.prop("checked",!0))}),e(".btn-group input[checked=checked]").each(function(){""==e(this).val()?e("label[for="+e(this).attr("id")+"]").addClass("active btn-primary"):0==e(this).val()?e("label[for="+e(this).attr("id")+"]").addClass("active btn-danger"):e("label[for="+e(this).attr("id")+"]").addClass("active btn-success")})},canOpenModal:!0,modals:{},modalTemplate:"<div class='shmodal hide ' id='{%selector%}'><div class='shmodal-header'><button type='button' class='close' data-dismiss='modal'>Ã—</button>{%title%}</div><div id='{%selector%}-container'></div></div>",selectedIdsUrl:"",setSelectedIdsUrl:function(e){shlBootstrap.selectedIdsUrl=e},getModalUrl:function(e){return e+shlBootstrap.selectedIdsUrl},closeModal:function(){e("div.shmodal-header button.close").click()},setModalTitleFromModal:function(e){window.parent.jQuery("div.shmodal-header:visible").html("<h3>"+e+"</h3>")},registerModal:function(t){var r={};r=e.extend({selector:"",title:"",url:"",width:.5,height:.5,onclose:"",footer:"",content:"",onDisplay:"",backdrop:!0,keyboard:!1},t),shlBootstrap.modals[r.selector]=r},renderModal:function(t,r){var a=shlBootstrap.modalTemplate.replace(new RegExp("{%selector%}","g"),r.selector),o=r.title?"<h3>"+r.title+"</h3>":"&nbsp;";a=a.replace("{%title%}",o),e(a).appendTo("#shl-modals-container"),e("#"+r.selector).on("show",function(){if(!shlBootstrap.canOpenModal)return!1;var t,r=shlBootstrap.modals[this.id],a=r.width<1?e(window).width()*r.width:r.width,o=r.height<1?e(window).height()*r.height:r.height,n=shlBootstrap.getModalUrl(r.url),l=jQuery("#"+r.selector);t=r.content?r.content:'<iframe class="iframe" src="'+n+'" height="'+o+'" width="'+a+'" ></iframe>',jQuery("#"+r.selector+"-container").html('<div class="shmodal-body" style="height:'+o+"px; width:"+a+'px;">'+t+"</div>"+r.footer);var i=l.height(),s=l.width(),d=jQuery(window).height(),c=(jQuery(window).width()-s)/2,h=(d-i)/2;jQuery("#"+r.selector).css({"margin-top":h,top:"0"}),jQuery("#"+r.selector).css({"margin-left":c,left:"0"}),r.onDisplay&&"function"==typeof window[r.onDisplay]&&window[r.onDisplay](this)}),e("#"+r.selector).on("hide",function(){var e=shlBootstrap.modals[this.id];e.onclose&&e.onclose(),jQuery("#"+this.id+"-container").innerHTML=""}),e("#"+r.selector).modal({keyboard:r.keyboard,backdrop:r.backdrop,show:!1})},renderModals:function(){e.each(shlBootstrap.modals,shlBootstrap.renderModal)},inputCounters:{},registerInputCounter:function(t){var r={maxCharacterSize:-1,originalStyle:"badge-success",warningStyle:"badge-warning",errorStyle:"badge-important",warningNumber:20,errorNumber:40,displayFormat:"#left",style:"shl-char-counter",title:""};t=e.extend(r,t),shlBootstrap.inputCounters[t.selector]=t},renderInputCounters:function(){e.each(shlBootstrap.inputCounters,shlBootstrap.renderInputCounter)},renderInputCounter:function(t,r){e("#"+r.selector).textareaCount(r)},onReady:function(){e("<div id='shl-modals-container'></div>").appendTo("body"),shlBootstrap.renderModals(),shlBootstrap.renderInputCounters()}};return jQuery(document).ready(t.onReady),t}(jQuery);!function(e){e.fn.textareaCount=function(t,r){function a(){return p.html(o()),void 0!==r&&r.call(this,l()),!0}function o(){var e=u.val(),r=e.length;if(t.maxCharacterSize>0){r>=t.maxCharacterSize&&(e=e.substring(0,t.maxCharacterSize));var a=s(e),o=t.maxCharacterSize-a;if(i()||(o=t.maxCharacterSize),r>o){var l=this.scrollTop;u.val(e.substring(0,o)),this.scrollTop=l}p.removeClass(t.warningStyle),p.removeClass(t.originalStyle),r>t.errorNumber?p.addClass(t.errorStyle):r>t.warningNumber?p.addClass(t.warningStyle):p.addClass(t.originalStyle),f=u.val().length+a,i()||(f=u.val().length),g=c(d(u.val())),m=t.errorNumber-f}else{a=s(e);f=u.val().length+a,i()||(f=u.val().length),g=c(d(u.val()))}return n()}function n(){var e=t.displayFormat;return e=e.replace("#input",f),e=e.replace("#words",g),v>0&&(e=e.replace("#max",v),e=e.replace("#left",m)),e}function l(){return{input:f,max:v,left:m,words:g}}function i(){return-1!=navigator.appVersion.toLowerCase().indexOf("win")}function s(e){for(var t=0,r=0;r<e.length;r++)"\n"==e.charAt(r)&&t++;return t}function d(e){var t=/^[^A-Za-z0-9]+/gi,r=(e+" ").replace(t,""),a=rExp=/[^A-Za-z0-9]+/gi;return r.replace(a," ").split(" ")}function c(e){return e.length-1}var h={maxCharacterSize:-1,originalStyle:"originalTextareaInfo",warningStyle:"warningTextareaInfo",errorStyle:"errorTextareaInfo",warningNumber:20,errorNumber:40,displayFormat:"#input characters | #words words",title:""},t=e.extend(h,t),u=e(this);u.wrap("<div class='shl-char-counter-wrapper'></div>"),e("<div class='charleft badge "+t.style+"' "+(t.title?"title='"+t.title+"'":"")+">&nbsp;</div>").insertAfter(u);var p=function(e){return e.next(".charleft")}(u);p.addClass(t.originalStyle);var f=0,v=t.maxCharacterSize,m=0,g=0;u.bind("keyup",function(e){a()}).bind("mouseover",function(e){setTimeout(function(){a()},10)}).bind("paste",function(e){setTimeout(function(){a()},10)}),a()}}(jQuery);
